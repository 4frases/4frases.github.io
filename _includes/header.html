<header class="header">
    <div class="header-container">
        <div class="logo">
            <h1 class="milogo"><a href="/" class="nav-link2" data-page="/">
                <span>4</span>FRASES
            </a></h1>
            <p class="tagline">Rock, Rap, Trap, Pop & más</p>
        </div>
        <nav class="nav">
            <ul>
                <li><a href="/" class="nav-link" data-page="/">Inicio</a></li>
                <li><a href="/pages/musica.html" class="nav-link" data-page="/pages/musica.html">Música</a></li>
                <li><a href="/pages/letras.html" class="nav-link" data-page="/pages/letras.html">Letras</a></li>
                <li><a href="/pages/videos.html" class="nav-link" data-page="/pages/videos.html">Vídeos</a></li>
                <li><a href="/pages/contacto.html" class="nav-link" data-page="/pages/contacto.html">Contacto</a></li>
            </ul>
        </nav>
    </div>
</header>



<style>
    #page-content {
        position: relative;
        min-height: 100vh;
        width: 100%;
        overflow: hidden;
    }
    
    .page-slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        min-height: 100vh;
        animation: slideIn 0.5s ease-in-out forwards;
    }
    
    .page-slide.exit-left {
        animation: slideOutLeft 0.5s ease-in-out forwards;
    }
    
    .page-slide.exit-right {
        animation: slideOutRight 0.5s ease-in-out forwards;
    }
    
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOutLeft {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(-100%);
            opacity: 0;
        }
    }
    
    @keyframes slideOutRight {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
</style>

<script>






    function loadPage(url, direction = 'right') {
        const pageContent = document.getElementById('page-content');
        
        // Crear contenedor temporal para la nueva página
        const newContainer = document.createElement('div');
        newContainer.className = `page-slide`;
        
        fetch(url)
            .then(response => response.text())
            .then(html => {
                // Extraer solo el contenido dentro de <main>
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                const mainContent = tempDiv.querySelector('main');
                
                if (mainContent) {
                    newContainer.innerHTML = mainContent.innerHTML;
                } else {
                    newContainer.innerHTML = html;
                }
                
                // Animar salida de página actual Y entrada de nueva al mismo tiempo
                const currentContent = pageContent.querySelector('.page-slide:not(.exit-left):not(.exit-right)');
                
                // Agregar la nueva página al contenedor PRIMERO
                pageContent.appendChild(newContainer);
                
                if (currentContent) {
                    // Animar salida de página actual
                    currentContent.classList.add(direction === 'right' ? 'exit-left' : 'exit-right');
                    
                    // Cuando termina la animación, remover la página anterior
                    setTimeout(() => {
                        currentContent.remove();
                        
                        // Ejecutar scripts
                        const scripts = newContainer.querySelectorAll('script');
                        scripts.forEach(script => {
                            const newScript = document.createElement('script');
                            newScript.textContent = script.textContent;
                            newContainer.appendChild(newScript);
                        });
                        
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }, 500);
                } else {
                    // Primera carga
                    // Ejecutar scripts
                    const scripts = newContainer.querySelectorAll('script');
                    scripts.forEach(script => {
                        const newScript = document.createElement('script');
                        newScript.textContent = script.textContent;
                        newContainer.appendChild(newScript);
                    });
                }
            })
            .catch(error => {
                console.error('Error:', error);
                newContainer.innerHTML = '<p>Error cargando la página</p>';
                pageContent.appendChild(newContainer);
            });
    }
    
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const page = link.getAttribute('data-page');
            window.history.pushState({ page }, '', page);
            loadPage(page, 'right');
        });
    });
    
    window.addEventListener('popstate', (e) => {
        if (e.state && e.state.page) {
            loadPage(e.state.page, 'left');
        }
    });
    
    document.addEventListener('DOMContentLoaded', function() {
    // Limpiar contenido inicial
    const pageContent = document.getElementById('page-content');
    pageContent.innerHTML = '';
    
    // Detectar la URL actual
    let initialPage = window.location.pathname;
    
    // Si es raíz, cargar index
    if (initialPage === '/' || initialPage === '') {
        initialPage = '/';
    }
    
    loadPage(initialPage);
});
</script>